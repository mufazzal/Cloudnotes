Autoscalling is the GERM of AWS.

When you are using EC2 for any computing (like webserver, DB analysis, image processing), you may need to 
add/remove some more instance depending on load on each EC2.

EC2 - Auto scalling is done via configuring two part
  1.  Launch Configuration or Launch Template:-
        Here you decide how your each EC2 instance would look like. its cpu/memory/EBS capacity, bootstrap script, 
        Security Group, SSH-key pair
        Actully setting this up is almost same as launching a new EC2 instance except in the end it will not launche
        it, but save the set up for on demand launch.
        You can either use Launch Config or Template for this. 
        AWS recommend to use Template as it provides the latest feature like Spot Instances, and template versioning also.
  2.  Auto Scalling Group
        This will set the scenario and capacity, that in which condition we should launch the instances and how many of them
        should be launch. Also you set in which AZ they should be launch.
                
        2.1. First you need to select the 'Launch Configuration' you created earlier
        2.2. Then Desired capacity: the number of instances you wants up and running in normal load
        2.3. Then select the VPC, If you wants the launched instances to lie in some other VPC then default one.
        2.4. Then select subnet  -> 
           You have to select at leat one Subnet in which you wants your instances to launch. always select more then one subnet for higher availibility.
        2.5 LB: Connecting Auto Scalling and Load Balancing:-
             You can desigen the Auto-Scalling-Group in such a way that the launch instances in scalling group will auomatically get attached to a Load balancer.
             For this you have to connect the 'Auto Scalluing Group' [at auto scalling side] to the 'Target Group'[at LB side]
              2.5.1 Click 'Advance'
              2.5.2 Check 'Load Balancing'
              2.5.3 Select the target group[of load balancer] in which you wants to launche th instance.
              
        2.6 Publip Ip for each instance: 
            if you wants each launched instances to have a public IP then youst choose proper options in Advance setting
        2.6 Set the policy:-
              2.6.1 Policy for scalling: Set the condition when the scal up and scale down should happen
                  eg. :  if cpu utilization of each EC2 goes above 90% then sacle up.
              2.6.1 Set How Many Minimum instance you will need at least: This much instance will always be avaialable
              2.6.2 Set How many Maximum instance you can bear: Set one by one how many instance the system can create if situtation demand autoscalling
        7 Select some ore things like tah and all.
        DONE
        Once you are done, the EC2 instances will launch automatically and at the begining the number of instances launched 
        will be equal to value choosed in step 2.2
                      
        All Tuning eg:
         in normal time number of instances = value choosed in step 2.2
         if policy break an need more capasity (eg: if cpu utilization of each EC2 goes above 90% ) then sacle up
         and launch new instances. launch one at a time till you reach at point where no of running instances  =  value choosed in step 2.6.1
         Significance of value  choosed in step 2.6.2  ??????????????????
         
         
         IMP : 
            value in step 2.6.1  <= value in step 2.2  <=  value in step 2.6.2
         
       Launch Configuration VS ASG:-  
        The first one tell you how an each instance will look like in itself.
        Second tell you how those instances are arranged in infrastrucre. 
          Like in what VPC, Subnet behide what LB, wil they have public IP etc.
         ---------------------------------

ASG Lifecycle Hook:-
  ASG also provide the lofecycle hook for launched and terminated instances. 
  In ASG you can set the hook to trigger when any instance is launched or terminated. This trigger could be a SNS or SQS.
  Whenver the ASG launch or terminate the instance the respective hook run. it send the message to SQS or SNS.
  
  CFR for hook:-
    EC2LaunchHook: 
      Type: AWS::AutoScaling::LifecycleHook
      Properties: 
        AutoScalingGroupName: 
          Ref: ASG
        LifecycleTransition: "autoscaling:EC2_INSTANCE_LAUNCHING"
        NotificationTargetARN: 
          Ref: EC2WebsServerLaunchSNSTopic
        RoleARN: 
          Fn::GetAtt: 
            - ATSRoleForSNSAccess
            - Arn  
   
   ATSRoleForSNSAccess:
    This is the role created for ASG service(autoscaling.amazonaws.com) which give SNS:Publish permission of SNS topic. 
    
  There is two hook one for launch and one fo terminating. 
  When hook is running then at that time the instance is not in service state instaed it is in either Pending:Wait or Terminating:Wait state.
  
  What happed if hook fail with some error, then u r given the two param to handle such failure.
      DefaultResult: "CONTINUE" OR "ABANDON"
      HeartbeatTimeout: 120
  So if hook fail or hook take more then 120 second then the instance will
  - continue to process in service sate if DefaultResult = CONTINUE
  - discard the EC2 instance if DefaultResult = ABANDON

------------------------
Scalling:-

    -------+-----------
  
  
   
    
    
    


